---
title: å †æ’åº
date: '2025-06-06 21:37:40'
updated: '2025-06-07 01:06:03'
---
### **å †æ’åºï¼ˆHeap Sortï¼‰è¯¦è§£**
å †æ’åºæ˜¯ä¸€ç§åŸºäº**äºŒå‰å †ï¼ˆBinary Heapï¼‰****æ•°æ®ç»“æ„çš„****æ¯”è¾ƒç±»æ’åºç®—æ³•**ï¼Œå…·æœ‰**åŸåœ°æ’åº**å’Œ**ä¸ç¨³å®šæ’åº**çš„ç‰¹æ€§ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯**å°†å¾…æ’åºåºåˆ—æ„é€ æˆä¸€ä¸ªå¤§é¡¶å †ï¼ˆæˆ–å°é¡¶å †ï¼‰**ï¼Œç„¶å**é€æ­¥å–å‡ºå †é¡¶å…ƒç´ **ï¼Œå®Œæˆæ’åºã€‚

---

## **1. å †æ’åºçš„æ ¸å¿ƒç‰¹æ€§**
### **(1) æ—¶é—´å¤æ‚åº¦**
+ **å»ºå †ï¼ˆHeapifyï¼‰**ï¼š`O(n)`ï¼ˆè‡ªåº•å‘ä¸Šè°ƒæ•´ï¼‰
+ **æ’åº**ï¼šæ¯æ¬¡è°ƒæ•´å † `O(log n)`ï¼Œå…± `n` æ¬¡ â†’ `O(n log n)`
+ **æ€»ä½“**ï¼š`O(n log n)`ï¼ˆæœ€ä¼˜ã€æœ€åã€å¹³å‡æƒ…å†µä¸€è‡´ï¼‰

### **(2) ç©ºé—´å¤æ‚åº¦**
+ **åŸåœ°æ’åº**ï¼š`O(1)`ï¼ˆä»…éœ€å¸¸æ•°ç©ºé—´ï¼‰

### **(3) ä¸ç¨³å®šæ€§**
+ äº¤æ¢å †é¡¶å’Œæœ«å°¾å…ƒç´ æ—¶å¯èƒ½ç ´åç›¸åŒå…ƒç´ çš„ç›¸å¯¹é¡ºåºã€‚

### **(4) é€‚ç”¨åœºæ™¯**
+ **å¤§è§„æ¨¡æ•°æ®**ï¼ˆæ—¶é—´å¤æ‚åº¦ç¨³å®šåœ¨ `O(n log n)`ï¼‰
+ **å†…å­˜å—é™ç¯å¢ƒ**ï¼ˆåŸåœ°æ’åºï¼‰
+ **ä¼˜å…ˆçº§é˜Ÿåˆ—**ï¼ˆå¦‚å®šæ—¶ä»»åŠ¡è°ƒåº¦ï¼‰

---

## **2. å †æ’åºçš„æ­¥éª¤ä¸å®ç°**
### **(1) ç®—æ³•æµç¨‹**
1. **å»ºå †ï¼ˆHeapifyï¼‰**ï¼šå°†æ— åºæ•°ç»„æ„é€ æˆ**å¤§é¡¶å †**ï¼ˆçˆ¶èŠ‚ç‚¹ â‰¥ å­èŠ‚ç‚¹ï¼‰ã€‚
2. **æ’åº**ï¼š
    - äº¤æ¢å †é¡¶ï¼ˆæœ€å¤§å€¼ï¼‰ä¸æœ«å°¾å…ƒç´ ã€‚
    - ç¼©å°å †èŒƒå›´ï¼Œé‡æ–°è°ƒæ•´å †ç»“æ„ã€‚
    - é‡å¤ç›´åˆ°å †å¤§å°ä¸º1ã€‚

### **(2) åŠ¨å›¾æ¼”ç¤º**
![](/images/ce4ba32a49313d27981c7a8aad7dc504.gif)

#### **åŠ¨å›¾è§£è¯»**ï¼š
+ **é»„è‰²**ï¼šå½“å‰å¾…è°ƒæ•´çš„å †é¡¶å…ƒç´ ã€‚
+ **çº¢è‰²**ï¼šäº¤æ¢å †é¡¶ä¸æœ«å°¾å…ƒç´ ã€‚
+ **ç»¿è‰²**ï¼šå·²æ’åºéƒ¨åˆ†ã€‚

### **(3) ä»£ç å®ç°**
#### **C++ å®ç°**
```cpp
#include <vector>
using namespace std;

void heapify(vector<int>& arr, int n, int i) {
    int largest = i;       // åˆå§‹åŒ–æœ€å¤§èŠ‚ç‚¹ä¸ºæ ¹
    int left = 2 * i + 1;  // å·¦å­èŠ‚ç‚¹
    int right = 2 * i + 2; // å³å­èŠ‚ç‚¹

    // æ¯”è¾ƒæ ¹ä¸å·¦å³å­èŠ‚ç‚¹
    if (left < n && arr[left] > arr[largest])
        largest = left;
    if (right < n && arr[right] > arr[largest])
        largest = right;

    // è‹¥æœ€å¤§å€¼ä¸æ˜¯æ ¹ï¼Œäº¤æ¢å¹¶é€’å½’è°ƒæ•´
    if (largest != i) {
        swap(arr[i], arr[largest]);
        heapify(arr, n, largest);
    }
}

void heapSort(vector<int>& arr) {
    int n = arr.size();

    // æ„å»ºå¤§é¡¶å †ï¼ˆä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹ï¼‰
    for (int i = n / 2 - 1; i >= 0; i--)
        heapify(arr, n, i);

    // é€ä¸ªæå–å †é¡¶å…ƒç´ 
    for (int i = n - 1; i > 0; i--) {
        swap(arr[0], arr[i]);  // å°†æœ€å¤§å€¼ç§»åˆ°æœ«å°¾
        heapify(arr, i, 0);    // è°ƒæ•´å‰©ä½™å †
    }
}
```

#### **Python å®ç°**
```python
def heapify(arr, n, i):
    largest = i
    left = 2 * i + 1
    right = 2 * i + 2

    if left < n and arr[left] > arr[largest]:
        largest = left
    if right < n and arr[right] > arr[largest]:
        largest = right

    if largest != i:
        arr[i], arr[largest] = arr[largest], arr[i]
        heapify(arr, n, largest)

def heap_sort(arr):
    n = len(arr)

    # å»ºå †
    for i in range(n // 2 - 1, -1, -1):
        heapify(arr, n, i)

    # æ’åº
    for i in range(n - 1, 0, -1):
        arr[0], arr[i] = arr[i], arr[0]
        heapify(arr, i, 0)
```

**ç¤ºä¾‹è¿è¡Œ**ï¼š

```python
arr = [12, 11, 13, 5, 6, 7]
heap_sort(arr)
print("æ’åºå:", arr)  # è¾“å‡º: [5, 6, 7, 11, 12, 13]
```

---

## **3. å †æ’åºçš„ä¼˜åŒ–**
### **(1) è¿­ä»£ä»£æ›¿é€’å½’**
+ é€’å½’ç‰ˆæœ¬çš„ `heapify` å¯èƒ½æ ˆæº¢å‡ºï¼Œå¯æ”¹ç”¨å¾ªç¯å®ç°ï¼š

```python
def heapify(arr, n, i):
    while True:
        largest = i
        left = 2 * i + 1
        right = 2 * i + 2
        if left < n and arr[left] > arr[largest]:
            largest = left
        if right < n and arr[right] > arr[largest]:
            largest = right
        if largest == i:
            break
        arr[i], arr[largest] = arr[largest], arr[i]
        i = largest
```

### **(2) å°é¡¶å †é™åºæ’åº**
+ ä¿®æ”¹æ¯”è¾ƒé€»è¾‘å³å¯ï¼š

```python
if left < n and arr[left] < arr[smallest]:
    smallest = left
```

---

## **4. å †æ’åº vs å…¶ä»–æ’åºç®—æ³•**
| **ç®—æ³•** | **æ—¶é—´å¤æ‚åº¦** | **ç©ºé—´å¤æ‚åº¦** | **ç¨³å®šæ€§** | **é€‚ç”¨åœºæ™¯** |
| --- | --- | --- | --- | --- |
| å †æ’åº | `O(n log n)` | `O(1)` | âŒ | å¤§è§„æ¨¡æ•°æ®ã€å†…å­˜å—é™ |
| å¿«é€Ÿæ’åº | `O(n log n)` | `O(log n)` | âŒ | é€šç”¨æ’åºã€éšæœºæ•°æ® |
| å½’å¹¶æ’åº | `O(n log n)` | `O(n)` | âœ… | å¤–éƒ¨æ’åºã€ç¨³å®šæ€§è¦æ±‚ |
| æ’å…¥æ’åº | `O(nÂ²)` | `O(1)` | âœ… | å°è§„æ¨¡æˆ–éƒ¨åˆ†æœ‰åºæ•°æ® |


---

## **5. ç»å…¸ä¾‹é¢˜**
### **(1) æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ ï¼ˆLeetCode 215ï¼‰**
+ **é—®é¢˜**ï¼šæ— éœ€å®Œå…¨æ’åºï¼Œæ‰¾åˆ°ç¬¬Kå¤§çš„å…ƒç´ ã€‚
+ **è§£æ³•**ï¼šåˆ©ç”¨å †æ’åºéƒ¨åˆ†ä¼˜åŒ–ï¼š

```python
def findKthLargest(nums, k):
    def heapify(arr, n, i):
        largest = i
        left = 2 * i + 1
        right = 2 * i + 2
        if left < n and arr[left] > arr[largest]:
            largest = left
        if right < n and arr[right] > arr[largest]:
            largest = right
        if largest != i:
            arr[i], arr[largest] = arr[largest], arr[i]
            heapify(arr, n, largest)
    
    n = len(nums)
    # æ„å»ºå¤§é¡¶å †
    for i in range(n // 2 - 1, -1, -1):
        heapify(nums, n, i)
    # æå–å‰kä¸ªå…ƒç´ 
    for i in range(n - 1, n - k - 1, -1):
        nums[0], nums[i] = nums[i], nums[0]
        heapify(nums, i, 0)
    return nums[-k]
```

---

## **æ€»ç»“**
| **å…³é”®ç‚¹** | **è¯´æ˜** |
| --- | --- |
| **æ ¸å¿ƒæ€æƒ³** | é€šè¿‡äºŒå‰å †çš„æ’å…¥å’Œåˆ é™¤æ“ä½œå®ç°æ’åºã€‚ |
| **ä¼˜åŠ¿** | æ—¶é—´å¤æ‚åº¦ç¨³å®š `O(n log n)`ï¼ŒåŸåœ°æ’åºã€‚ |
| **åŠ£åŠ¿** | ä¸ç¨³å®šï¼Œç¼“å­˜ä¸å‹å¥½ï¼ˆè·³è·ƒè®¿é—®ï¼‰ã€‚ |
| **å®é™…åº”ç”¨** | ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆå¦‚Pythonçš„`heapq`ï¼‰ã€Linuxå†…æ ¸ä»»åŠ¡è°ƒåº¦ã€‚ |


å †æ’åºæ˜¯ç†è§£**å †æ•°æ®ç»“æ„**å’Œ**é€‰æ‹©ç±»æ’åº**çš„é‡è¦åŸºç¡€ï¼Œé€‚åˆè§£å†³**Top Ké—®é¢˜**ï¼ ğŸš€

