---
title: å›æº¯
date: '2025-06-06 21:23:33'
updated: '2025-06-07 01:53:24'
---
### **å›æº¯ç®—æ³•ï¼ˆBacktrackingï¼‰è¯¦è§£**
å›æº¯ç®—æ³•æ˜¯ä¸€ç§**é€šè¿‡è¯•é”™æ¥å¯»æ‰¾æ‰€æœ‰ï¼ˆæˆ–éƒ¨åˆ†ï¼‰è§£çš„æš´åŠ›æœç´¢ç®—æ³•**ã€‚å®ƒé€šè¿‡**é€’å½’**å°è¯•å¯èƒ½çš„è§£ï¼Œå¹¶åœ¨å‘ç°å½“å‰è·¯å¾„æ— æ³•å¾—åˆ°æœ‰æ•ˆè§£æ—¶**å›é€€ï¼ˆå›æº¯ï¼‰**ï¼Œå°è¯•å…¶ä»–é€‰æ‹©ã€‚

---

## **1. å›æº¯ç®—æ³•çš„æ ¸å¿ƒç‰¹æ€§**
### **(1) ç³»ç»Ÿæ€§æœç´¢**
+ éå†æ‰€æœ‰å¯èƒ½çš„è§£ç©ºé—´ï¼ˆç±»ä¼¼æ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰ã€‚
+ **é€‚ç”¨äºç»„åˆé—®é¢˜**ï¼ˆå¦‚æ’åˆ—ã€å­é›†ã€æ£‹ç›˜ç±»é—®é¢˜ï¼‰ã€‚

### **(2) çŠ¶æ€é‡ç½®ï¼ˆæ’¤é”€é€‰æ‹©ï¼‰**
+ æ¯æ¬¡é€’å½’åå¿…é¡»**æ¢å¤ç°åœº**ï¼ˆå¦‚æ’¤é”€æœ€åä¸€æ­¥çš„é€‰æ‹©ï¼‰ã€‚

### **(3) å‰ªæä¼˜åŒ–**
+ é€šè¿‡çº¦æŸæ¡ä»¶æå‰ç»ˆæ­¢æ— æ•ˆåˆ†æ”¯çš„æœç´¢ï¼ˆå‡å°‘è®¡ç®—é‡ï¼‰ã€‚

### **(4) æ—¶é—´å¤æ‚åº¦**
+ é€šå¸¸ä¸º**æŒ‡æ•°çº§**ï¼ˆå¦‚ `O(n!)` æˆ– `O(2â¿)`ï¼‰ï¼Œä½†å‰ªæå¯å¤§å¹…ä¼˜åŒ–å®é™…è¿è¡Œæ—¶é—´ã€‚

---

## **2. å›æº¯ç®—æ³•çš„é€šç”¨æ¡†æ¶**
```python
def backtrack(è·¯å¾„, é€‰æ‹©åˆ—è¡¨):
    if æ»¡è¶³ç»ˆæ­¢æ¡ä»¶:
        ä¿å­˜ç»“æœï¼ˆå¦‚æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ï¼‰
        return
    
    for é€‰æ‹© in é€‰æ‹©åˆ—è¡¨:
        if é€‰æ‹©ä¸åˆæ³•:  # å‰ªæ
            continue
        åšé€‰æ‹©ï¼ˆå¦‚å°†é€‰æ‹©åŠ å…¥è·¯å¾„ï¼‰
        backtrack(è·¯å¾„, æ–°çš„é€‰æ‹©åˆ—è¡¨)  # é€’å½’
        æ’¤é”€é€‰æ‹©ï¼ˆå¦‚ä»è·¯å¾„ä¸­åˆ é™¤é€‰æ‹©ï¼‰  # å›æº¯
```

---

## **3. ç»å…¸é—®é¢˜ä¸ä»£ç å®ç°**
### **(1) å…¨æ’åˆ—ï¼ˆLeetCode 46ï¼‰**
+ **é—®é¢˜**ï¼šç»™å®šæ— é‡å¤æ•°å­—çš„æ•°ç»„ï¼Œè¿”å›æ‰€æœ‰å¯èƒ½çš„æ’åˆ—ã€‚

```python
def permute(nums):
    def backtrack(path):
        if len(path) == len(nums):
            res.append(path.copy())
            return
        for num in nums:
            if num in path:  # å‰ªæï¼šå·²ä½¿ç”¨çš„æ•°å­—è·³è¿‡
                continue
            path.append(num)
            backtrack(path)
            path.pop()  # å›æº¯
    
    res = []
    backtrack([])
    return res
```

### **(2) Nçš‡åï¼ˆLeetCode 51ï¼‰**
+ **é—®é¢˜**ï¼šåœ¨NÃ—Næ£‹ç›˜ä¸Šæ”¾ç½®Nä¸ªçš‡åï¼Œä½¿å…¶äº’ä¸æ”»å‡»ã€‚

```python
def solveNQueens(n):
    def backtrack(row):
        if row == n:
            res.append(["".join(row) for row in board])
            return
        for col in range(n):
            if not is_valid(row, col):
                continue
            board[row][col] = 'Q'
            backtrack(row + 1)
            board[row][col] = '.'  # å›æº¯
    
    def is_valid(row, col):
        # æ£€æŸ¥åˆ—ã€å·¦ä¸Šå¯¹è§’çº¿ã€å³ä¸Šå¯¹è§’çº¿
        for i in range(row):
            if board[i][col] == 'Q':
                return False
            if col - (row - i) >= 0 and board[i][col - (row - i)] == 'Q':
                return False
            if col + (row - i) < n and board[i][col + (row - i)] == 'Q':
                return False
        return True
    
    board = [['.'] * n for _ in range(n)]
    res = []
    backtrack(0)
    return res
```

### **(3) å­é›†ï¼ˆLeetCode 78ï¼‰**
+ **é—®é¢˜**ï¼šç»™å®šæ— é‡å¤å…ƒç´ çš„æ•°ç»„ï¼Œè¿”å›æ‰€æœ‰å¯èƒ½çš„å­é›†ã€‚

```python
def subsets(nums):
    def backtrack(start, path):
        res.append(path.copy())
        for i in range(start, len(nums)):
            path.append(nums[i])
            backtrack(i + 1, path)  # é¿å…é‡å¤é€‰æ‹©
            path.pop()
    
    res = []
    backtrack(0, [])
    return res
```

---

## **4. å›æº¯ vs åŠ¨æ€è§„åˆ’ vs åˆ†æ²»**
| **ç‰¹æ€§** | **å›æº¯ç®—æ³•** | **åŠ¨æ€è§„åˆ’** | **åˆ†æ²»ç®—æ³•** |
| --- | --- | --- | --- |
| **è§£å†³é—®é¢˜ç±»å‹** | ç»„åˆã€æ’åˆ—ã€å†³ç­–é—®é¢˜ï¼ˆå¦‚Nçš‡åï¼‰ | æœ€ä¼˜åŒ–é—®é¢˜ï¼ˆå¦‚æœ€çŸ­è·¯å¾„ï¼‰ | å¯åˆ†è§£çš„å­é—®é¢˜ï¼ˆå¦‚æ’åºï¼‰ |
| **æ—¶é—´å¤æ‚åº¦** | é€šå¸¸æŒ‡æ•°çº§ï¼ˆ`O(2â¿)` æˆ– `O(n!)`ï¼‰ | å¤šé¡¹å¼æ—¶é—´ï¼ˆå¦‚ `O(nÂ²)`ï¼‰ | é€šå¸¸ `O(n log n)` |
| **ç©ºé—´å¤æ‚åº¦** | å–å†³äºé€’å½’æ·±åº¦ï¼ˆ`O(n)`ï¼‰ | éœ€å­˜å‚¨å­é—®é¢˜ç»“æœ | é€’å½’æ ˆç©ºé—´ |
| **æ ¸å¿ƒæ“ä½œ** | è¯•é”™ + å›æº¯ | çŠ¶æ€è½¬ç§» + å¡«è¡¨ | åˆ†è§£ + åˆå¹¶ |


---

## **5. å›æº¯ç®—æ³•çš„ä¼˜åŒ–æŠ€å·§**
### **(1) å‰ªæï¼ˆPruningï¼‰**
+ **çº¦æŸæ¡ä»¶å‰ªæ**ï¼šè·³è¿‡ä¸æ»¡è¶³æ¡ä»¶çš„é€‰æ‹©ï¼ˆå¦‚å…¨æ’åˆ—ä¸­æ’é™¤å·²ç”¨æ•°å­—ï¼‰ã€‚
+ **é™ç•Œå‰ªæ**ï¼šåœ¨æ±‚æœ€ä¼˜è§£æ—¶ï¼Œæå‰ç»ˆæ­¢æ¯”å½“å‰è§£æ›´å·®çš„åˆ†æ”¯ï¼ˆå¦‚æ—…è¡Œå•†é—®é¢˜ï¼‰ã€‚

### **(2) è®°å¿†åŒ–ï¼ˆMemoizationï¼‰**
+ ç¼“å­˜é‡å¤å­é—®é¢˜çš„ç»“æœï¼ˆå¦‚è§£å†³é‡å¤è®¡ç®—é—®é¢˜ï¼Œä½†é€šå¸¸åŠ¨æ€è§„åˆ’æ›´ä¼˜ï¼‰ã€‚

### **(3) è¿­ä»£å®ç°**
+ ç”¨æ ˆæ¨¡æ‹Ÿé€’å½’è°ƒç”¨ï¼Œé¿å…æ ˆæº¢å‡ºï¼ˆå¦‚DFSçš„è¿­ä»£ç‰ˆæœ¬ï¼‰ã€‚

---

## **6. å›æº¯ç®—æ³•çš„å±€é™æ€§**
1. **æŒ‡æ•°çº§å¤æ‚åº¦**ï¼šé—®é¢˜è§„æ¨¡è¾ƒå¤§æ—¶æ•ˆç‡æä½ï¼ˆå¦‚ `n > 20` çš„å…¨æ’åˆ—ï¼‰ã€‚
2. **é‡å¤å­é—®é¢˜**ï¼šè‹¥å­é—®é¢˜é‡å¤ï¼ˆå¦‚æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼‰ï¼ŒåŠ¨æ€è§„åˆ’æ›´é«˜æ•ˆã€‚
3. **éš¾ä»¥å‰ªæçš„é—®é¢˜**ï¼šè‹¥æ— æ³•æœ‰æ•ˆå‰ªæï¼Œå›æº¯å¯èƒ½æ— æ³•åœ¨åˆç†æ—¶é—´å†…æ±‚è§£ã€‚

---

## **7. ç»å…¸ä¾‹é¢˜**
### **(1) ç»„åˆæ€»å’Œï¼ˆLeetCode 39ï¼‰**
+ **é—®é¢˜**ï¼šç»™å®šæ— é‡å¤å…ƒç´ çš„æ•°ç»„å’Œç›®æ ‡å€¼ï¼Œæ‰¾å‡ºæ‰€æœ‰å’Œä¸ºç›®æ ‡çš„ç»„åˆï¼ˆå¯é‡å¤ä½¿ç”¨æ•°å­—ï¼‰ã€‚

```python
def combinationSum(candidates, target):
    def backtrack(start, path, remain):
        if remain == 0:
            res.append(path.copy())
            return
        for i in range(start, len(candidates)):
            if candidates[i] > remain:  # å‰ªæ
                continue
            path.append(candidates[i])
            backtrack(i, path, remain - candidates[i])  # å…è®¸é‡å¤é€‰æ‹©
            path.pop()
    
    res = []
    backtrack(0, [], target)
    return res
```

### **(2) å•è¯æœç´¢ï¼ˆLeetCode 79ï¼‰**
+ **é—®é¢˜**ï¼šåœ¨äºŒç»´å­—ç¬¦ç½‘æ ¼ä¸­æœç´¢ç»™å®šå•è¯ï¼ˆç›¸é‚»å­—æ¯è¿æ¥ï¼‰ã€‚

```python
def exist(board, word):
    def backtrack(i, j, k):
        if k == len(word):
            return True
        if i < 0 or i >= m or j < 0 or j >= n or board[i][j] != word[k]:
            return False
        tmp, board[i][j] = board[i][j], '/'  # æ ‡è®°å·²è®¿é—®
        found = (backtrack(i+1, j, k+1) or backtrack(i-1, j, k+1) or
                 backtrack(i, j+1, k+1) or backtrack(i, j-1, k+1))
        board[i][j] = tmp  # å›æº¯
        return found
    
    m, n = len(board), len(board[0])
    for i in range(m):
        for j in range(n):
            if backtrack(i, j, 0):
                return True
    return False
```

---

## **8. æ€»ç»“**
| **å…³é”®ç‚¹** | **è¯´æ˜** |
| --- | --- |
| **æ ¸å¿ƒæ€æƒ³** | é€’å½’å°è¯•æ‰€æœ‰å¯èƒ½ï¼Œå¤±è´¥æ—¶å›é€€ï¼ˆâ€œè¯•é”™æ³•â€ï¼‰ã€‚ |
| **é€‚ç”¨åœºæ™¯** | ç»„åˆã€æ’åˆ—ã€æ£‹ç›˜ç±»é—®é¢˜ï¼ˆå¦‚Nçš‡åã€æ•°ç‹¬ï¼‰ã€‚ |
| **ä¼˜åŒ–å…³é”®** | å‰ªæå‡å°‘æ— æ•ˆæœç´¢ï¼Œè®°å¿†åŒ–é¿å…é‡å¤è®¡ç®—ã€‚ |
| **å±€é™æ€§** | é—®é¢˜è§„æ¨¡å¤§æ—¶æ•ˆç‡ä½ï¼Œéœ€è°¨æ…ä½¿ç”¨ã€‚ |


å›æº¯ç®—æ³•æ˜¯è§£å†³**ç»„åˆä¼˜åŒ–é—®é¢˜**çš„åˆ©å™¨ï¼Œåˆç†å‰ªæåèƒ½é«˜æ•ˆæ±‚è§£è®¸å¤šNPéš¾é¢˜ï¼ ğŸ”

