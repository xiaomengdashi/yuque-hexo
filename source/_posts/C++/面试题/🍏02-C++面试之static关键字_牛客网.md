---
title: "\U0001F34F02-C++é¢è¯•ä¹‹staticå…³é”®å­—_ç‰›å®¢ç½‘"
date: '2025-01-10 02:11:52'
updated: '2025-01-10 02:16:12'
---
## 1 ä¸è€ƒè™‘classæƒ…å†µï¼šå’Œ`c`è¯­è¨€çš„`static`ä¸€æ ·
1. éšè—ï¼šæ‰€æœ‰ä¸åŠ `static`çš„å…¨å±€å˜é‡å’Œå‡½æ•°å…·æœ‰å…¨å±€å¯è§æ€§ï¼Œå¯ä»¥åœ¨å…¶ä»–æ–‡ä»¶ä¸­ä½¿ç”¨ï¼›åŠ äº†`static`ä¹‹åŽåªèƒ½åœ¨è¯¥æ–‡ä»¶æ‰€åœ¨çš„ç¼–è¯‘æ¨¡å—ä¸­ä½¿ç”¨ã€‚
2. æœªåˆå§‹åŒ–é™æ€å˜é‡é»˜è®¤åˆå§‹åŒ–ä¸º0ï¼šéƒ½å­˜åœ¨**é™æ€å­˜å‚¨åŒº.BSS**ã€‚
3. é™æ€å˜é‡ä½œç”¨æŒä¹…ï¼šé™æ€å˜é‡åœ¨å‡½æ•°å†…å®šä¹‰ï¼Œå§‹ç»ˆå­˜åœ¨ï¼Œä½†åªè¿›è¡Œä¸€æ¬¡åˆå§‹åŒ–ï¼Œå…·æœ‰è®°å¿†æ€§ï¼Œå…¶ä½œç”¨èŒƒå›´ä¸Žå±€éƒ¨å˜é‡ç›¸åŒï¼Œå‡½æ•°é€€å‡ºåŽä»ç„¶å­˜åœ¨ï¼Œä½†ä¸èƒ½å¤Ÿä½¿ç”¨ã€‚

å…¨å±€çš„å˜é‡/é™æ€å˜é‡ï¼Œåœ¨**ç¼–è¯‘è¿‡ç¨‹ä¸­**ï¼Œå°±å·²ç»ç”Ÿæˆåœ¨æ‰§è¡Œæ–‡ä»¶ä¸­äº†ï¼›

å±€éƒ¨é™æ€å˜é‡åœ¨**ç¨‹åºè¿è¡Œæ—¶**åˆ›å»ºåˆ°é™æ€å†…å­˜åŒºåŸŸï¼Œæ­¤åŽä¸€ç›´æŒç»­åˆ°è¿è¡Œç»“æŸæ—¶å€™ï¼Œå†æ¶ˆå¤±ã€‚

## 2 è€ƒè™‘classç±»çš„æƒ…å†µ
+ `static`ä¿®é¥°å˜é‡ï¼Œæ˜¯æ•´ä¸ªç±»çš„æ•°æ®æˆå‘˜ï¼Œå­˜å‚¨ä¸å ç”¨æŸä¸ªå…·ä½“å¯¹è±¡çš„ç©ºé—´ï¼Œå…¶å­˜å‚¨åœ¨**é™æ€å­˜å‚¨åŒº**ï¼›

`static`ä¿®é¥°æˆå‘˜å‡½æ•°ï¼Œç”¨äºŽå¤„ç†é™æ€æˆå‘˜å˜é‡ï¼Œå¯ä»¥ç”¨**ç±»åå­—æ¥è°ƒç”¨**ï¼Œä¹Ÿå¯ä»¥ç”¨**å¯¹è±¡åå­—æ¥è°ƒç”¨**ã€‚

+ é€šè¿‡ç±»å`+`ä½œç”¨åŸŸè¿ç®—ç¬¦`::`ç›´æŽ¥è®¿é—®é™æ€æˆå‘˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨ç±»çš„å¯¹è±¡ã€å¼•ç”¨æˆ–è€…æŒ‡é’ˆæ¥è®¿é—®é™æ€æˆå‘˜ã€‚ä½†é€šè¿‡ç±»åä¸å¯ä»¥è®¿é—®éžé™æ€æˆå‘˜ï¼Œé€šè¿‡ç±»çš„å¯¹è±¡å¯ä»¥è°ƒç”¨é™æ€å’Œéžé™æ€çš„ã€‚

åŽŸå› åœ¨äºŽï¼šé™æ€æˆå‘˜å‡½æ•°å±žäºŽè¿™ä¸ªç±»åœ¨åˆå§‹åŒ–çš„æ—¶å€™åŠ è½½çš„ï¼Œåœ¨ç±»å®žä¾‹åŒ–å¯¹è±¡ä¹‹å‰ï¼Œå°±å·²ç»åˆ†é…äº†å†…å­˜ç©ºé—´äº†ï¼›è€Œéžé™æ€æˆå‘˜å‡½æ•°å¿…é¡»åœ¨ç±»å®žä¾‹åŒ–å¯¹è±¡åŽæ‰æœ‰å†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥ä¸èƒ½é€šè¿‡ç±»åæ¥è°ƒç”¨éžé™æ€å‡½æ•°ï¼Œå¥½æ¯”è°ƒç”¨äº†ä¸€ä¸ªæ²¡æœ‰å£°æ˜Žçš„å‡½æ•°ã€‚

+ **é™æ€æˆå‘˜å‡½æ•°**ï¼šå®šä¹‰åœ¨ç±»çš„å†…å¤–éƒ¨éƒ½å¯ä»¥ï¼›ç±»å¤–éƒ¨å®žçŽ°é€»è¾‘çš„æ—¶å€™ï¼Œä¸éœ€è¦`static`å…³é”®å­—ï¼ˆç±»é‡Œé¢å·²ç»å£°æ˜Žè¿‡äº†ï¼‰ï¼›å¹¶ä¸”ä¸Žä¸€èˆ¬çš„æˆå‘˜å‡½æ•°çš„åŒºåˆ«å°±æ˜¯**æ²¡æœ‰thisæŒ‡é’ˆ**ï¼Œä¸èƒ½è®¿é—®ç±»çš„éžé™æ€æˆå‘˜å˜é‡ã€‚

1ï¼‰åŽŸå› åˆ†æžï¼šç”±äºŽé™æ€æˆå‘˜å‡½æ•°æ²¡æœ‰thisæŒ‡é’ˆï¼Œä¸çŸ¥é“æŒ‡å‘å“ªä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥æ— æ³•è®¿é—®å¯¹è±¡çš„æˆå‘˜å˜é‡ï¼Œåªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡ï¼Œï¼ˆä¹Ÿå°±æ˜¯æ¯ä¸ªå¯¹è±¡éƒ½å…±æœ‰çš„é™æ€å˜é‡ï¼‰

2ï¼‰thiså‚æ•°æ‹“å±•ä¸€ä¸ªé—®é¢˜ï¼šï¼ˆæ‹“å±•è§£æžï¼šsortå‡½æ•°çš„æ¯”è¾ƒå‡½æ•°ï¼Œå†™åœ¨ç±»é‡Œé¢æ—¶éœ€è¦ä½¿ç”¨`static bool operator`è§C++STLæ¨¡å—13th ï¼‰ï¼Œç”±äºŽä¼ å…¥sortå‡½æ•°`sort(nums.begin(), nums.end(), more);`çš„æ¯”è¾ƒå‡½æ•°`more`ï¼Œéœ€è¦ç¬¦åˆfefaultå½¢å¼ï¼Œåœ¨ç±»é‡Œé¢å£°æ˜Žçš„è¯ï¼Œéœ€è¦è®¾ç½®æˆstaticå½¢å¼ï¼Œæ¶ˆé™¤æŽ‰è¿™ä¸ªé»˜è®¤çš„`this`å‚æ•°ã€‚

3ï¼‰thiså‚æ•°å†æ¬¡æ‹“å±•ä¸€ä¸ªé—®é¢˜ï¼šå¯¹äºŽ`pthread_create()`çš„çº¿ç¨‹å‡½æ•°ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰æ¥è¯´ï¼Œçº¿ç¨‹å‡½æ•°éœ€è¦è®¾ç½®æˆé™æ€æˆå‘˜å‡½æ•°ï¼Œç”±äºŽç±»æˆå‘˜å‡½æ•°ï¼Œé»˜è®¤çš„ä¼šä¼ å…¥å‚æ•°`this`æŒ‡é’ˆè¿›åŽ»ï¼Œæ‰€ä»¥è®¾ç½®ä¸ºé™æ€æˆå‘˜å‡½æ•°ã€‚

+ é™æ€æˆå‘˜å˜é‡ï¼šä¸æ˜¯åœ¨ç±»çš„æž„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼ˆåªæœ‰åœ¨å®žä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™æ‰è°ƒç”¨ï¼‰çš„ï¼Œå®ƒæ˜¯ç‹¬ç«‹äºŽå¯¹è±¡çš„æ“ä½œï¼Œå¿…é¡»åœ¨**ç±»çš„å¤–éƒ¨å®šä¹‰å’Œåˆå§‹åŒ–æ¯ä¸ªé™æ€æˆå‘˜**ï¼Œå­˜æ”¾åœ¨**å…¨å±€å˜é‡**`**.data**`**åŒº**ï¼Œä¸”ä¸€ç›´å­˜æ´»åœ¨æ•´ä¸ªæ–‡ä»¶ç”Ÿå‘½å‘¨æœŸå†…ã€‚

> Nonstatic data members æ”¾ç½®çš„æ˜¯â€œä¸ªåˆ«çš„class objectâ€æ„Ÿå…´è¶£çš„æ•°æ®ï¼ŒStatic data members åˆ™æ”¾ç½®çš„æ˜¯â€œæ•´ä¸ªclassâ€æ„Ÿå…´è¶£çš„æ•°æ®ã€‚
>
> Static data members æ°¸è¿œåªå­˜åœ¨ä¸€ä»½å®žä¾‹ï¼ˆå³ä½¿è¯¥class æ²¡æœ‰ ä»»ä½•objectå®žä¾‹ï¼Œå…¶static data membersä¹Ÿå·²å­˜åœ¨ï¼Œåœ¨ç±»å®žä¾‹åŒ–å¯¹è±¡ä¹‹å‰å°±å·²ç»åˆ†é…äº†å†…å­˜ç©ºé—´ã€‚
>
> --æ·±åº¦æŽ¢ç´¢C++å¯¹è±¡æ¨¡åž‹p88
>

+ é™æ€æˆå‘˜å˜é‡ç±»çš„åˆå§‹åŒ–ä¾‹å­

```cpp
class Account {
public:
void f1();
static double rate() { retunr interestRate; } 
static void rate(double); // ç±»åœ¨å¤–éƒ¨å®šä¹‰çš„æ—¶å€™ï¼Œä¸åœ¨éœ€è¦staticå…³é”®å­—

private:
std::string owner; // ä¸¤ä¸ªæˆå‘˜
double amount;
static constexpr int period =30; // æ˜¯å¸¸é‡è¡¨è¾¾å¼å°±å¯ä»¥ç›´æŽ¥åœ¨å†…éƒ¨è¿›è¡Œå®šä¹‰
static double interestRate; // ä¸€èˆ¬çš„static å˜é‡éœ€è¦åœ¨å¤–éƒ¨å®šä¹‰    
}

// ä¸€èˆ¬çš„è¯ï¼Œæ˜¯åœ¨ç±»çš„å¤–éƒ¨å®šä¹‰staticå˜é‡
double Account::interestRate =initRate();


// ç±»åœ¨å¤–éƒ¨å®šä¹‰çš„æ—¶å€™ï¼Œä¸åœ¨éœ€è¦staticå…³é”®å­—
void Account::rate(double a) {
    interestRate =newRate;
}

void main() {
    Account::f1(); // ä¸å¯ä»¥å¼•ç”¨çš„ï¼Œéžé™æ€æˆå‘˜çš„å¼•ç”¨å¿…é¡»ä¸Žç‰¹å®šçš„å¯¹è±¡ç›¸å¯¹
    Account::rate(); // é™æ€æˆå‘˜æ˜¯å¯ä»¥çš„
}
```

+ ä¼˜ç‚¹ï¼š1ï¼‰èŠ‚çœå†…å­˜ç©ºé—´ï¼Œå› ä¸ºå®ƒæ˜¯æ‰€æœ‰å¯¹è±¡å…¬æœ‰çš„ï¼Œå¯¹å¤šä¸ªå¯¹è±¡æ¥è¯´ï¼Œé™æ€æ•°æ®æˆå‘˜å€¼å­˜å‚¨åœ¨å…¨å±€é™æ€å˜é‡`.data`åŒºï¼›2ï¼‰é™æ€å€¼æ›´æ–°ï¼šåªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œåªè¦å¯¹é™æ€æˆå‘˜å˜é‡çš„å€¼æ›´æ–°ä¸€æ¬¡ï¼Œå°±å¯ä»¥ä¿è¯æ‰€æœ‰å¯¹è±¡å¾—åˆ°çš„éƒ½æ˜¯æ›´æ–°åŽçš„å€¼ï¼Œæé«˜æ—¶é—´æ•ˆçŽ‡ï¼›3ï¼‰å†…å­˜åˆ†é…æ—¶é—´é˜¶æ®µï¼š**é™æ€å…¨å±€å˜é‡**ï¼Œåœ¨ä¸»ç¨‹åºä¹‹å‰ï¼Œç¼–è¯‘å™¨åœ¨**ç¼–è¯‘æ—¶æœŸ**å·²ç»ä¸ºå…¶åˆ†é…å¥½å†…å­˜å¹¶åˆå§‹åŒ–ï¼›**å±€éƒ¨é™æ€å˜é‡**ï¼ˆåœ¨å‡½æ•°ä½“å†…ï¼‰ï¼Œåœ¨**ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶**åˆ†é…åˆ°å…¨å±€å˜é‡åŒº`.data`åŒºï¼Œå¹¶è¿›è¡Œåˆå§‹åŒ–ã€‚

## 3 **ç±»ä¸­çš„é™æ€æˆå‘˜å‡½æ•°å¦‚ä½•è®¿é—®éžé™æ€æˆå‘˜å‡½æ•°**ï¼ˆå»¶ä¼¸ä¸€ä¸ªé—®é¢˜ï¼‰
ç”±ä¸Šåˆ†æžï¼Œä¼—æ‰€å‘¨çŸ¥ï¼Œè¿™æ˜¯ä¸å¯ä»¥è®¿é—®çš„ï¼Œå› ä¸º1ï¼‰é™æ€æˆå‘˜å‡½æ•°ä¸å±žäºŽæŸä¸€ä¸ªå…·ä½“çš„ç±»çš„ï¼Œè€Œæ˜¯æ‰€æœ‰ç±»è¿›è¡Œå…±äº«çš„ï¼›2ï¼‰static å‡½æ•°æ²¡æœ‰é»˜è®¤çš„thisæŒ‡é’ˆä½œä¸ºå‚æ•°ä¼ é€’è¿›æ¥ã€‚

æ‰€ä»¥ï¼Œå½“staticæˆå‘˜å‡½æ•°ï¼Œæ¥è°ƒç”¨non-staticçš„æˆå‘˜å˜é‡æ—¶ï¼Œä¸çŸ¥é“è°ƒç”¨çš„æ˜¯å“ªä¸ªå®žä¾‹çš„ç±»çš„æˆå‘˜å˜é‡ã€‚å¯ä»¥è¯´ï¼Œå°±æ˜¯å› ä¸ºæ²¡æœ‰thisæŒ‡é’ˆçš„ç¼˜æ•…ï¼Œå› æ­¤ï¼Œæƒ³è®¿é—®çš„è¯ï¼Œæˆ‘ä»¬å°±ä¼ é€’ä¸€ä¸ªthisæŒ‡é’ˆç»™staticæˆå‘˜å‡½æ•°å³å¯ã€‚

## ðŸ¤”way-01ï¼šåœ¨é™æ€å‡½æ•°çš„å½¢å‚è¡¨é‡ŒåŠ ä¸Šå®žä¾‹çš„åœ°å€ï¼ˆç›´æŽ¥ä½¿ç”¨è¿™ä¸ªå³å¯ï¼‰
```plain
class A
{
public:
    static void test(A *a)
    {
        a->m_a += 1; /* é€šè¿‡ä¼ é€’æŒ‡é’ˆä½œä¸ºå‚æ•°çš„å½¢å¼è®¿é—® */
    }
    void hello()
    {
    }
private:
    static int m_staticA;
    int m_a
};
```

## ðŸ¤”way-02ï¼šæ”¾ä¸Šå…¨å±€å˜é‡åœ°å€ï¼ˆä¸æŽ¨èï¼‰:dog:
```plain
A g_a;

class A
{
public:
    static void test()
    {
        g_a.m_a += 1; /* ä»¥å…¨å±€å˜é‡çš„å½¢å¼è®¿é—® */
    }
    void hello()
    {
    }
private:
    static int m_staticA;
    int m_a
};
```

## ðŸ¤”way-03ï¼šé™æ€å‡½æ•°å¯ä»¥è®¿é—®é™æ€æˆå‘˜ï¼Œæ‰€ä»¥åœ¨æˆå‘˜å˜é‡é‡Œé¢å°†ä¸€ä¸ªé™æ€å˜é‡ä¿å­˜ç€thisæŒ‡é’ˆå³å¯ï¼Œåœ¨åˆå§‹åŒ–çš„ï¼Œå°†è¯¥é™æ€å˜é‡åˆå§‹åŒ–ä¸ºthisæŒ‡é’ˆå³å¯ã€‚
```plain
class A
{
public:
    A()
    {
        m_gA = this; /* ç›´æŽ¥èµ‹å€¼ä¸ºthisæŒ‡é’ˆå³å¯ */
    }
    static void test()
    {
        m_gA.m_a += 1;
    }
    void hello()
    {
    }
private:
    static int m_staticA;
    static A *m_gA; /* åˆ©ç”¨è¿™ä¸ªæŒ‡é’ˆå˜é‡å³å¯ */
    int m_a
};
```

+ å‚è€ƒç½‘å€ï¼š 
    - [C/C++ ä¸­ static çš„ç”¨æ³•å…¨å±€å˜é‡ä¸Žå±€éƒ¨å˜é‡](https://gw-c.nowcoder.com/api/sparta/jump/link?link=https%3A%2F%2Fwww.runoob.com%2Fw3cnote%2Fcpp-static-usage.html)
    - [C++é™æ€æˆå‘˜å‡½æ•°è®¿é—®éžé™æ€æˆå‘˜çš„å‡ ç§æ–¹æ³•](https://gw-c.nowcoder.com/api/sparta/jump/link?link=https%3A%2F%2Fwww.cnblogs.com%2Frickyk%2Fp%2F4238380.html)

## ðŸ˜¯Q1 ç±»ä¸­çš„é™æ€æˆå‘˜å‡½æ•°å¯ä»¥å®šä¹‰ä¸ºè™šå‡½æ•°å—ï¼Ÿ
+ ç»“è®º

ä¸€èˆ¬çš„staticæ˜¯ä¸å±žäºŽä»»ä½•ç±»å¯¹è±¡çš„ï¼Œç‹¬ç«‹äºŽç±»å¯¹åƒå­˜åœ¨çš„ï¼Œå¤§å®¶å…±äº«ä¸€ä¸ªå‡½æ•°ï¼Œå³ä¾¿æ­¤é™æ€å‡½æ•°åŠ ä¸Švirtualä¹Ÿæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚

+ åŒºåˆ«ç‚¹

å›žå¿†é™æ€å’Œéžé™æ€æˆå‘˜å‡½æ•°çš„ä¸€ä¸ªä¸»è¦åŒºåˆ«å°±æ˜¯ï¼Œé™æ€æˆå‘˜å‡½æ•°æ²¡æœ‰`this`æŒ‡é’ˆï¼Œç‹¬ç«‹äºŽç±»å¯¹è±¡å­˜åœ¨ã€‚é‚£è¿™æ ·å°±çŸ›ç›¾èµ·æ¥ï¼Œè™šå‡½æ•°éœ€è¦ä¾é ç±»å¯¹è±¡çš„thisæŒ‡é’ˆ-->è™šè¡¨æŒ‡é’ˆvptr-->è™šè¡¨ï¼Œæ¥è¿›è¡Œè°ƒç”¨çš„ã€‚

å¯¹äºŽé™æ€å‡½æ•°ï¼Œæ²¡æœ‰thisï¼Œæ‰€ä»¥æ— æ³•è®¿é—®è™šå‡½æ•°ã€‚

+ è™šå‡½æ•°çš„è°ƒç”¨å…³ç³»

this-->vptr-->vtable-->virtual function



