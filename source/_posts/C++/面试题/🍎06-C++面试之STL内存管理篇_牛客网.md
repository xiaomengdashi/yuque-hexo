---
title: "\U0001F34E06-C++é¢è¯•ä¹‹STLå†…å­˜ç®¡ç†ç¯‡_ç‰›å®¢ç½‘"
date: '2025-01-10 02:15:01'
updated: '2025-01-10 02:15:02'
---
[toc]

## 0 å‰è¿°
æœ¬éƒ¨åˆ†å…³äºŽ`CPP`çš„`STL`çš„å†…å­˜ç®¡ç†æ–¹å¼çš„ç‚¹æ¥å±•å¼€å³å¯ï¼Œåˆ†åˆ«è®¨è®ºæ™®é€šçš„å†…å­˜ç®¡ç†æ–¹å¼å’Œ`STL`çš„å†…å­˜ç®¡ç†æ–¹å¼ï¼Œä»¥åŠ`STL`å†…å­˜ç®¡ç†æ–¹å¼æœ¬èº«çš„å¯æ”¹å–„çš„ç‚¹ã€‚

## 1 æ™®é€šçš„å†…å­˜ç®¡ç†æ–¹å¼
æˆ‘ä»¬çŸ¥é“åŠ¨æ€å¼€è¾Ÿå†…å­˜æ˜¯ï¼Œè¦åœ¨å †ä¸Šç”³è¯·ï¼›

1ï¼‰å¦‚æžœè¯´éœ€è¦çš„é¢‘ç¹çš„è¯ï¼Œå°±éœ€è¦ä¸€æ¬¡æ¬¡åœ¨å †ä¸Šå¼€è¾Ÿå’Œé‡Šæ”¾å†…å­˜ï¼Œå¹¶ä¸”ä¼šé€ æˆå†…å­˜ç¢Žç‰‡åŒ–ï¼Œæµªè´¹å†…å­˜ç©ºé—´ï¼ˆåœ¨ç”³è¯·ä¸€æ•´ä¸ªå¤§å—å†…å­˜ç©ºé—´çš„æ—¶å€™ï¼Œéƒ½æ˜¯ä¸è¿žç»­çš„å°ç¢Žç‰‡ï¼‰ï¼›

2ï¼‰ä¸”æ¯æ¬¡ç”³è¯·éƒ½è¦è¿›è¡Œè°ƒç”¨`malloc`å’Œ`free`æ“ä½œï¼Œé€ æˆé…ç½®æ—¶çš„ä¸€äº›é¢å¤–è´Ÿæ‹…ã€‚

ä»¥æ­¤ï¼Œä»¥æ•ˆçŽ‡è‘—ç§°çš„`STL`åº“ï¼Œæå‡ºä¸¤çº§ç©ºé—´é…ç½®å™¨ã€‚1ï¼‰å½“ä¸€æ¬¡ç”³è¯·çš„å†…å­˜å¤Ÿå¤§ï¼Œè¶…è¿‡`128bytes`æ—¶ï¼Œå°±ç§»äº¤ç»™ç¬¬ä¸€çº§é…ç½®å™¨å¤„ç†ï¼Œå°±æ˜¯ç›´æŽ¥`new`å’Œ`delete`å‡ºä¸€å—å¤§å†…å­˜ï¼›2ï¼‰å½“ä¸€æ¬¡ç”³è¯·çš„ç©ºé—´å°äºŽ`128bytes`ï¼Œå°±ä½¿ç”¨äºŒçº§é…ç½®å™¨ä»¥**å†…å­˜æ± **çš„å½¢å¼è¿›è¡Œç®¡ç†ã€‚å†…å­˜æ± çš„ä¸€ä¸ªæ˜¾è‘—ä¼˜ç‚¹å°±æ˜¯å°½é‡é¿å…å†…å­˜ç¢Žç‰‡ï¼Œä½¿å¾—å†…å­˜åˆ†é…æ•ˆçŽ‡å¾—åˆ°æå‡ã€‚

## 2 `STL`å†…å­˜ç®¡ç†æ–¹å¼
+ æ•´ä½“å½¢å¼ï¼Œç»´æŠ¤`16`æ¡`free-list`ï¼Œå¯¹åº”å„å¤§å°çš„å†…å­˜å—ï¼Œä»Ž`0~15`å·ï¼Œå†…å­˜æœ€å°`8bytes`ï¼Œä»¥`8bytes`é€æ¸é€’å¢žï¼Œæœ€å¤§`128bytes`ã€‚ä¼ å…¥çš„å‚æ•°ä¼šè‡ªåŠ¨å°†å†…å­˜éœ€æ±‚é‡ä¸Šè°ƒè‡³`8`çš„å€æ•°ï¼ˆæ¯”å¦‚å®¢æˆ·ç«¯éœ€è¦`30bytes`ï¼Œè¿™è¾¹å°±è‡ªåŠ¨å•†è°ƒè‡³`32bytes`ï¼‰ï¼Œæ‰¾åˆ°`32bytes`æ‰€å¯¹åº”çš„å†…å­˜å¤§å°çš„é“¾è¡¨ï¼›
+ æŸ¥çœ‹æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºçš„è¯å°±ç›´æŽ¥ä»Žè¯¥é“¾è¡¨ä¸­å–å‡ºä¸€ä¸ªåˆ†é…ç»™è¯¥è¯·æ±‚ï¼Œå†å°†å¯¹åº”é“¾è¡¨çš„æŒ‡é’ˆå‘åŽç§»åŠ¨ä¸€ä½ã€‚
+ è‹¥å¯¹åº”çš„é“¾è¡¨ä¸ºç©ºçš„è¯ï¼Œè¿›ä¸€æ­¥ï¼Œå…ˆçœ‹çœ‹å†…å­˜æ± æ˜¯ä¸æ˜¯ç©ºçš„ï¼Œä¸ç©ºï¼Œå°±ä»Žå†…å­˜æ± é‡Œé¢åˆ†é…

1ï¼‰å…ˆæ£€æŸ¥å†…å­˜æ± å‰©ä½™ç©ºé—´ï¼Œå¤Ÿä¸å¤Ÿ`20`ä¸ªï¼ˆé»˜è®¤ï¼‰è¿™æ ·çš„ï¼ˆ`32bytes`å¤§å°ï¼‰çš„ç©ºé—´ï¼Œè‹¥è¶³å¤Ÿå°±ç›´æŽ¥æ‹¿å‡ºï¼Œå°†ä¸€ä¸ªåˆ†é…å‡ºåŽ»ï¼Œå‰©ä¸‹çš„æŒ‚è½½å¯¹åº”çš„`free-list`ä¸‹ï¼Œç­‰å¾…ä¸‹æ¬¡åˆ†é…ã€‚

2ï¼‰å¦‚æžœä¸å¤Ÿ`20`ä¸ªå¤§å°ï¼Œçœ‹å¤Ÿä¸å¤Ÿ1ä¸ªï¼Œå¤Ÿ1ä¸ªå°±å…ˆç›´æŽ¥åˆ†é…å‡ºåŽ»ã€‚å†æ›´æ–°`free-list`,å°†å†…å­˜æ± å‰©ä½™çš„ç©ºé—´åˆ†é…å°½å¯èƒ½å¤šçš„èŠ‚ç‚¹æŒ‚åœ¨å…¶ä»–`free-list`ä¸Šé¢ã€‚

3ï¼‰è‹¥æžœæ± å­å‰©ä½™çš„ç©ºé—´ä¸€ä¸ªéƒ½æ»¡è¶³ä¸äº†çš„è¯ï¼Œå…ˆå°†å†…å­˜æ± ä¸­å‰©ä½™çš„ç©ºé—´æŒ‚åœ¨ç›¸åº”å°å†…å­˜çš„`free-list`ä¸Šï¼Œç„¶åŽï¼Œæ‰¾è€å¤§"ç³»ç»Ÿ"ðŸ˜Žç»™å†…å­˜æ± åˆ†é…ç©ºé—´ã€‚

+ å†…å­˜æ± ç©ºçš„è¯

1ï¼‰ç»™å†…å­˜æ± ç”³è¯·å†…å­˜ï¼Œä½¿ç”¨`malloc()`ä»Ž`heap`ä¸Šç”³è¯·å†…å­˜ï¼ˆä¸€æ¬¡ç”³è¯·çš„å†…å­˜å¤§å°ä¸º= 2*æ‰€éœ€èŠ‚ç‚¹å†…å­˜ï¼ˆ8çš„å€æ•°ï¼‰ * 20ä¸ª + ä¸€æ®µé¢å¤–çš„ç©ºé—´ï¼‰ï¼Œå¤§çº¦ç”³è¯·40å—ï¼Œä¸€åŠæ‹¿æ¥ç”¨ï¼Œæ”¾åœ¨`free-list`ä¸Šé¢ï¼›ä¸€èˆ¬æ”¾åœ¨å†…å­˜æ± ä¸­ã€‚

	ðŸ˜¯ä¸€ä¸ªå¥‡æ€ªçš„æé—®ï¼šä¸ºä»€ä¹ˆä¼šæ˜¯ä¹˜ä»¥2çš„æ“ä½œï¼Œå°±å’Œ`vector`ï¼Œåœ¨å­˜æ”¾æ»¡çš„æ—¶å€™ï¼Œè¿›è¡Œæ‰©å……ä¸€æ ·ï¼Œä¸ºä»€ä¹ˆæ˜¯2å€ï¼Œä¸æ˜¯1.5å€è¿™æ ·çš„æ‰©å……ï¼šï¼ˆæ›¾ç»æœ‰ä¸ªé¢è¯•å®˜è¿™æ ·é—®è¿‡ï¼‰

ç­”ï¼šç›®å‰çœ‹æ¥å¤§è‡´æ˜¯ï¼Œ2å¯¹äºŽè®¡ç®—æœºæ¥è¯´æ¯”è¾ƒå¥½å¤„ç†ä¸€äº›ï¼ŒäºŒè¿›åˆ¶ç›´æŽ¥ä½¿ç”¨`10`å³å¯è¡¨ç¤ºå‡ºæ¥ã€‚

2ï¼‰å‡è‹¥ç³»ç»Ÿä¸­æ²¡æœ‰`malloc`å‡ºæ¥ï¼Œè¯´æ˜Ž`heap`ï¼ˆç³»ç»Ÿï¼‰ä¸Šä¹Ÿæ²¡æœ‰å†…å­˜äº†ï¼Œé‚£å°±ä»Žå…¶ä»–å¤§çš„`free-list`ä¸Šå€Ÿä¸€ä¸ªèŠ‚ç‚¹ä½¿ç”¨ã€‚å¦‚æžœç³»ç»Ÿä¸Šä¹Ÿæ²¡æœ‰æ‰¾åˆ°ï¼Œé‚£å°±åªèƒ½è°ƒç”¨ä¸€çº§é…ç½®å™¨ã€‚

## 3 `STL`çš„ä¸€äº›ç¼ºç‚¹
+ è‡ªç”±é“¾è¡¨çš„ç®¡ç†é—®é¢˜ï¼ŒæŠŠæ‰€éœ€è¦ç”³è¯·çš„å†…å­˜è‡ªåŠ¨è°ƒæ•´åˆ°8çš„å€æ•°ã€‚æ¯”å¦‚ï¼Œä½ éœ€è¦ç”³è¯·1ä¸ªå­—èŠ‚çš„è¯ï¼Œä¹Ÿå°±ç»™ä½ 8bytesï¼Œæµªè´¹ï¼Œä¹…è€Œä¹…ä¹‹ï¼Œä¹Ÿä¼šé€ æˆå†…éƒ¨ç¢Žç‰‡çš„é—®é¢˜ã€‚
+ å†…å­˜çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæ‰€ç”³è¯·çš„å†…å­˜ä¼šä¸€å—å—æŒ‚åœ¨free-listä¸Šé¢ï¼Œä¹Ÿä¸ä¼šè¿˜ç»™æ“ä½œç³»ç»Ÿï¼Œç”³è¯·çš„å†…å­˜åªæœ‰åœ¨å½“å‰è¿›ç¨‹ç»“æŸçš„æ—¶å€™ï¼Œæ‰ä¼šé‡Šæ”¾å†…å­˜ã€‚

1ï¼‰å¼€è¾Ÿå°å†…å­˜å¼€è¾Ÿçš„å¤ªå¤šï¼Œå¯¼è‡´ç”³è¯·å¤§å†…å­˜çš„æ—¶å€™ï¼Œå°±å®¹æ˜“å¤±è´¥ï¼›

2ï¼‰ç”³è¯·çš„å†…å­˜å¤ªå¤šï¼Œä¸å½’è¿˜ï¼Œåˆ«çš„è¿›ç¨‹æƒ³ç”¨ä½†æ˜¯æ²¡æœ‰ï¼Œä¼šå¼•å‘é—®é¢˜ã€‚

  


> æ¥è‡ª: [ðŸŽ06-C++é¢è¯•ä¹‹STLå†…å­˜ç®¡ç†ç¯‡_ç‰›å®¢ç½‘](https://www.nowcoder.com/discuss/532593976755466240?sourceSSR=users)
>

