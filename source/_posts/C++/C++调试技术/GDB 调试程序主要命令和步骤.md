---
title: GDB 调试程序主要命令和步骤
date: '2025-01-11 18:17:56'
updated: '2025-01-11 18:20:45'
---
**问题**：<font style="color:rgb(0, 0, 0);">高大强同学刚入职了一个新公司，接触到某 Linux C++ 后端项目 BigTea，代码可以正常编译调试，高大强可以使用 gdb 调试法快速搞清楚程序在技术上的主要执行流，他该怎么做，请贴出这个过程中使用到的主要 GDB 调试命令。</font>

**答：**

首先，高大强需在 Linux 环境下，使用 GDB 调试 C++ 后端程序时，能够帮助高大强快速了解程序的执行流。以下是一些 GDB 调试的主要命令和步骤，可以帮助高大强进行调试，分析程序执行流程和发现潜在问题。

### 1. 启动 GDB 调试程序
首先，高大强需要启动 GDB 来调试程序。假设程序的可执行文件名为 `BigTea`，可以使用以下命令启动 GDB：

```bash
gdb ./BigTea
```

### 2. 设置调试符号
确保程序在编译时使用了调试符号（通常使用 `-g` 选项）。如果程序没有调试符号，GDB 可能无法显示变量信息和函数名称。

```bash
g++ -g -o BigTea source_file.cpp
```

### 3. 设置断点
通过设置断点，程序会在特定位置暂停，允许高大强查看程序的状态。可以通过以下命令设置断点：

+ 在某个函数处设置断点：

```bash
break function_name
```

+ 在某行代码处设置断点：

```bash
break file_name:line_number
```

比如，如果想在 `main.cpp` 的第 30 行处设置断点：

```bash
break main.cpp:30
```

### 4. 启动程序执行
在 GDB 中，使用 `run` 命令来启动程序执行。GDB 会在遇到断点时暂停程序。

```bash
run
```

### 5. 查看程序状态
当程序在断点处暂停时，可以使用 GDB 的一些命令来检查程序的状态：

+ **查看当前调用栈**：查看函数调用栈，可以帮助理解程序当前的执行路径。

```bash
backtrace
```

或者简写为：

```bash
bt
```

+ **查看当前函数的局部变量**：

```bash
info locals
```

+ **查看当前函数的所有参数**：

```bash
info args
```

+ **查看某个变量的值**：

```bash
print variable_name
```

+ **查看内存地址**：

```bash
x /10xw variable_name
```

这会显示 `variable_name` 的内存地址以及周围的内存内容。

### 6. 单步调试
单步执行程序，并逐行查看程序的执行流程。

+ **单步执行一行代码**，进入函数：

```bash
step
```

+ **单步执行一行代码**，不进入函数：

```bash
next
```

### 7. 继续执行程序
当程序在断点暂停时，使用以下命令继续执行程序，直到遇到下一个断点。

```bash
continue
```

### 8. 打印调用栈的详细信息
如果高大强想查看当前调用栈的更多信息，可以使用：

```bash
info stack
```

### 9. 修改变量值
在调试时，可以修改程序中的变量值来测试不同的执行路径。

```bash
set variable variable_name = new_value
```

### 10. 切换源代码文件
如果程序中有多个源代码文件，高大强可以使用 `list` 命令查看当前行附近的代码，或者查看指定文件的某一行代码。

```bash
list
```

或

```bash
list file_name:line_number
```

### 11. 结束调试
如果高大强想要结束调试，可以使用 `quit` 命令退出 GDB：

```bash
quit
```

### 12. 调试多线程程序
如果 BigTea 是一个多线程程序，高大强可以使用以下命令来查看线程信息和切换线程：

+ **查看所有线程**：

```bash
info threads
```

+ **切换到某个线程**：

```bash
thread thread_number
```

这些 GDB 调试命令可以帮助高大强快速调试程序，查看执行流、变量状态，定位问题所在。

